<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â•ëÁ¥ÑËÄÖÁôªÈå≤„Éï„Ç©„Éº„É†</title>
    
    <!-- „Éá„Ç∂„Ç§„É≥Áî®CSS (Tailwind) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- ReactÊú¨‰Ωì (UMDÁâà: „Éñ„É©„Ç¶„Ç∂„ÅßÁõ¥Êé•Âãï„Åè„Éê„Éº„Ç∏„Éß„É≥) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (JSXÂ§âÊèõÁî®) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        .animation-fade-in { animation: fadeIn 0.5s ease-in; }
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        // React„ÅÆÊ©üËÉΩ„Çí„Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„Åã„ÇâÂèñ„ÇäÂá∫„Åó
        const { useState } = React;
        const { createRoot } = ReactDOM;

        // --- „Ç¢„Ç§„Ç≥„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂÆöÁæ© (Â§ñÈÉ®Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº„ÇíÈò≤„Åê„Åü„ÇÅÂÜÖËîµÂåñ) ---
        const IconBase = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Sun = ({className}) => <IconBase className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconBase>;
        const CheckCircle = ({className}) => <IconBase className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const AlertCircle = ({className}) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const User = ({className}) => <IconBase className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const MapPin = ({className}) => <IconBase className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const Phone = ({className}) => <IconBase className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></IconBase>;
        const Mail = ({className}) => <IconBase className={className}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></IconBase>;
        const CreditCard = ({className}) => <IconBase className={className}><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></IconBase>;
        const BatteryCharging = ({className}) => <IconBase className={className}><path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"/><line x1="23" x2="23" y1="13" y2="11"/><polyline points="11 6 7 12 13 12 9 18"/></IconBase>;
        const Home = ({className}) => <IconBase className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></IconBase>;
        const Zap = ({className}) => <IconBase className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconBase>;
        const Briefcase = ({className}) => <IconBase className={className}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconBase>;
        const Wrench = ({className}) => <IconBase className={className}><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></IconBase>;
        const Clock = ({className}) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const Send = ({className}) => <IconBase className={className}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></IconBase>;

        // --- „É°„Ç§„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà ---
        function ContractForm() {
            // „Éï„Ç©„Éº„É†„ÅÆÁä∂ÊÖãÁÆ°ÁêÜ
            const [formData, setFormData] = useState({
                // Âü∫Êú¨ÊÉÖÂ†±
                contractType: 'Ëá™Á§æ',
                contractorName: '',
                postalCode: '',
                address: '',
                phone: '',
                email: '',
                
                // Â•ëÁ¥Ñ„ÉªÂïÜÊùêÊÉÖÂ†±
                contractAmount: '',
                selectedProducts: [],
                
                // ÂïÜÊùêË©≥Á¥∞
                solarManufacturer: '',
                solarCapacity: '',
                batteryManufacturer: '',
                batteryCapacity: '',
                ecoCuteManufacturer: '',
                ecoCuteCapacity: '',
                v2hManufacturer: '',
                ihManufacturer: '',
                
                // ÊãÖÂΩì„ÉªÊñΩÂ∑•
                apStaffName: '',
                clStaffName: '',
                surveyDate: '',
                constructionDate: '',
                isConstructionUndecided: false,
                
                notes: ''
            });

            const [status, setStatus] = useState('idle');
            const [errorMessage, setErrorMessage] = useState('');

            // ÂïÜÊùê„É™„Çπ„Éà
            const PRODUCT_OPTIONS = [
                { id: 'solar', label: '„ÇΩ„Éº„É©„Éº„Éë„Éç„É´' },
                { id: 'battery', label: 'ËìÑÈõªÊ±†' },
                { id: 'ecocute', label: '„Ç®„Ç≥„Ç≠„É•„Éº„Éà' },
                { id: 'v2h', label: 'V2H' },
                { id: 'ih', label: 'IH' },
            ];

            // Ë®≠ÂÆöÂÄ§Ôºà„ÉÄ„Éü„ÉºÔºâ
            const CONFIG = {
                kintoneAppId: 'YOUR_KINTONE_APP_ID',
                lineGroupId: 'YOUR_LINE_GROUP_ID' 
            };

            // ÂÖ•Âäõ„Éè„É≥„Éâ„É©
            const handleChange = (e) => {
                const { name, value, type, checked } = e.target;
                
                if (type === 'checkbox') {
                    if (name === 'isConstructionUndecided') {
                        setFormData(prev => ({ ...prev, [name]: checked }));
                    } else if (name === 'products') {
                        const currentProducts = [...formData.selectedProducts];
                        if (checked) {
                            currentProducts.push(value);
                        } else {
                            const index = currentProducts.indexOf(value);
                            if (index > -1) currentProducts.splice(index, 1);
                        }
                        setFormData(prev => ({ ...prev, selectedProducts: currentProducts }));
                    }
                } else {
                    setFormData(prev => ({ ...prev, [name]: value }));
                }
            };

            const handlePostalCodeBlur = () => {
                // ‰ΩèÊâÄÊ§úÁ¥¢API„Å™„Å©„ÅÆÂá¶ÁêÜÂ†¥ÊâÄ
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setStatus('loading');
                setErrorMessage('');

                try {
                    // „Éá„Éº„ÇøÊßãÁØâ„É≠„Ç∏„ÉÉ„ÇØ
                    const kintoneBody = {
                        app: CONFIG.kintoneAppId,
                        record: {
                            contract_type: { value: formData.contractType },
                            contractor_name: { value: formData.contractorName },
                            // ... „Åù„ÅÆ‰ªñ„ÅÆ„Éï„Ç£„Éº„É´„Éâ
                        }
                    };

                    console.log('Sending to Kintone:', kintoneBody);

                    // LINE„É°„ÉÉ„Çª„Éº„Ç∏ÊßãÁØâ
                    let productDetailsText = '';
                    if (formData.selectedProducts.includes('solar')) productDetailsText += `  ‚òÄÔ∏è „ÇΩ„Éº„É©„Éº: ${formData.solarManufacturer} (${formData.solarCapacity}kW)\n`;
                    if (formData.selectedProducts.includes('battery')) productDetailsText += `  üîã ËìÑÈõªÊ±†: ${formData.batteryManufacturer} (${formData.batteryCapacity}kWh)\n`;
                    if (formData.selectedProducts.includes('ecocute')) productDetailsText += `  üíß „Ç®„Ç≥„Ç≠„É•„Éº„Éà: ${formData.ecoCuteManufacturer} (${formData.ecoCuteCapacity}L)\n`;
                    if (formData.selectedProducts.includes('v2h')) productDetailsText += `  üöó V2H: ${formData.v2hManufacturer}\n`;
                    if (formData.selectedProducts.includes('ih')) productDetailsText += `  üç≥ IH: ${formData.ihManufacturer}\n`;

                    const constructionDateText = formData.isConstructionUndecided 
                        ? 'Êú™ÂÆö' 
                        : formData.constructionDate ? new Date(formData.constructionDate).toLocaleString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' }) : 'Êú™ÂÖ•Âäõ';

                    const surveyDateText = formData.surveyDate 
                        ? new Date(formData.surveyDate).toLocaleString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' })
                        : 'Êú™ÂÖ•Âäõ';

                    const lineMessage = {
                        to: CONFIG.lineGroupId,
                        messages: [
                            {
                                type: 'text',
                                text: `üéâ„ÄêÊàêÁ¥ÑÈÄüÂ†±„Äëüéâ\n\nÊãÖÂΩì: AP[${formData.apStaffName}] / CL[${formData.clStaffName}]\nÂ•ëÁ¥ÑÁ®ÆÂà•: ${formData.contractType}\n\n‚ñ†„ÅäÂÆ¢Êßò: ${formData.contractorName} Êßò\n‚ñ†‰ΩèÊâÄ: ${formData.address}\n‚ñ†Â•ëÁ¥ÑÈáëÈ°ç: ¬•${Number(formData.contractAmount).toLocaleString()}\n\n‚ñ†ÂïÜÊùêË©≥Á¥∞:\n${productDetailsText || '  „Å™„Åó'}\n‚ñ†„Çπ„Ç±„Ç∏„É•„Éº„É´:\n  ÁèæË™ø: ${surveyDateText}\n  ÊñΩÂ∑•: ${constructionDateText}\n\n‰∫ãÂãôÂ±Ä„ÅØÂ•ëÁ¥ÑÂá¶ÁêÜ„ÇíÈÄ≤„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑÔºÅ`
                            }
                        ]
                    };

                    console.log('Sending to LINE:', lineMessage);

                    // ÈÄÅ‰ø°„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ôºà1.5ÁßíÂæÖÊ©üÔºâ
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    setStatus('success');
                    window.scrollTo({ top: 0, behavior: 'smooth' });

                } catch (error) {
                    console.error('Error:', error);
                    setStatus('error');
                    setErrorMessage('ÈÄÅ‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ');
                }
            };

            const handleReset = () => {
                setFormData({
                    contractType: 'Ëá™Á§æ',
                    contractorName: '',
                    postalCode: '',
                    address: '',
                    phone: '',
                    email: '',
                    contractAmount: '',
                    selectedProducts: [],
                    solarManufacturer: '',
                    solarCapacity: '',
                    batteryManufacturer: '',
                    batteryCapacity: '',
                    ecoCuteManufacturer: '',
                    ecoCuteCapacity: '',
                    v2hManufacturer: '',
                    ihManufacturer: '',
                    apStaffName: '',
                    clStaffName: '',
                    surveyDate: '',
                    constructionDate: '',
                    isConstructionUndecided: false,
                    notes: ''
                });
                setStatus('idle');
            };

            return (
                <div className="min-h-screen py-10 px-4 sm:px-6 lg:px-8 font-sans text-slate-900">
                    <div className="max-w-3xl mx-auto">
                        
                        {/* „Éò„ÉÉ„ÉÄ„Éº */}
                        <div className="text-center mb-8">
                            <div className="flex justify-center mb-4">
                                <div className="bg-gradient-to-br from-yellow-400 to-orange-500 p-4 rounded-full shadow-lg">
                                    <Sun className="h-8 w-8 text-white" />
                                </div>
                            </div>
                            <h2 className="text-3xl font-extrabold text-slate-900 tracking-tight">
                                Â•ëÁ¥ÑËÄÖÁôªÈå≤„Éï„Ç©„Éº„É†
                            </h2>
                            <p className="mt-2 text-sm text-slate-500">
                                „ÅîÊàêÁ¥Ñ„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅË©≥Á¥∞ÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
                            </p>
                        </div>

                        {/* „É°„Ç§„É≥„Éï„Ç©„Éº„É†„Ç®„É™„Ç¢ */}
                        <div className="bg-white shadow-xl rounded-2xl overflow-hidden border border-slate-200">
                            
                            {status === 'success' ? (
                                <div className="p-10 text-center animation-fade-in">
                                    <div className="mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-green-100 mb-6">
                                        <CheckCircle className="h-10 w-10 text-green-600" />
                                    </div>
                                    <h3 className="text-2xl font-bold text-slate-900 mb-2">ÁôªÈå≤ÂÆå‰∫ÜÔºÅ</h3>
                                    <p className="text-slate-600 mb-8 max-w-md mx-auto">
                                        Kintone„Å∏„ÅÆÁôªÈå≤„Å®LINE„Ç∞„É´„Éº„Éó„Å∏„ÅÆÈÄöÁü•„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ<br/>
                                        ‰∫ãÂãôÂ±Ä„Å´„Å¶Á¢∫Ë™ç‰ΩúÊ•≠„Å´ÂÖ•„Çä„Åæ„Åô„ÄÇ
                                    </p>
                                    <button onClick={handleReset} className="w-full sm:w-auto inline-flex justify-center py-3 px-8 border border-transparent shadow-sm text-sm font-bold rounded-full text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
                                        Á∂ö„Åë„Å¶Êñ∞„Åó„ÅÑÂ•ëÁ¥Ñ„ÇíÂÖ•Âäõ
                                    </button>
                                </div>
                            ) : (
                                <form className="divide-y divide-slate-100" onSubmit={handleSubmit}>
                                    
                                    {/* Âü∫Êú¨ÊÉÖÂ†± */}
                                    <div className="p-6 sm:p-8 space-y-6">
                                        <h3 className="text-lg font-bold text-slate-900 flex items-center">
                                            <User className="w-5 h-5 mr-2 text-blue-500" />
                                            „ÅäÂÆ¢ÊßòÊÉÖÂ†±
                                        </h3>

                                        <div className="grid grid-cols-1 gap-6 sm:grid-cols-2">
                                            <div className="sm:col-span-1">
                                                <label className="block text-sm font-medium text-slate-700">Â•ëÁ¥ÑÁ®ÆÂà• <span className="text-red-500">*</span></label>
                                                <select name="contractType" value={formData.contractType} onChange={handleChange} className="mt-1 block w-full py-3 px-3 border border-slate-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                    <option value="Ëá™Á§æ">Ëá™Á§æ</option>
                                                    <option value="FIT">FIT</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-slate-700">Â•ëÁ¥ÑËÄÖÂêçÔºà„ÅäÂÆ¢ÊßòÂêçÔºâ <span className="text-red-500">*</span></label>
                                            <input type="text" name="contractorName" required className="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-slate-300 rounded-md py-3 px-3 border" placeholder="‰æãÔºöÂ±±Áî∞ Â§™ÈÉé" value={formData.contractorName} onChange={handleChange} />
                                        </div>

                                        <div className="grid grid-cols-1 gap-6 sm:grid-cols-3">
                                            <div className="sm:col-span-1">
                                                <label className="block text-sm font-medium text-slate-700">ÈÉµ‰æøÁï™Âè∑</label>
                                                <input type="text" name="postalCode" className="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-slate-300 rounded-md py-3 px-3 border" placeholder="123-4567" value={formData.postalCode} onChange={handleChange} onBlur={handlePostalCodeBlur} />
                                            </div>
                                            <div className="sm:col-span-2">
                                                <label className="block text-sm font-medium text-slate-700">Ë®≠ÁΩÆÂ†¥ÊâÄ‰ΩèÊâÄ <span className="text-red-500">*</span></label>
                                                <div className="mt-1 relative rounded-md shadow-sm">
                                                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><MapPin className="h-5 w-5 text-slate-400" /></div>
                                                    <input type="text" name="address" required className="focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-md py-3 border" placeholder="‰æãÔºöÊù±‰∫¨ÈÉΩÂçÉ‰ª£Áî∞Âå∫..." value={formData.address} onChange={handleChange} />
                                                </div>
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-1 gap-6 sm:grid-cols-2">
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700">ÈõªË©±Áï™Âè∑ <span className="text-red-500">*</span></label>
                                                <div className="mt-1 relative rounded-md shadow-sm">
                                                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><Phone className="h-5 w-5 text-slate-400" /></div>
                                                    <input type="tel" name="phone" required className="focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-md py-3 border" placeholder="090-1234-5678" value={formData.phone} onChange={handleChange} />
                                                </div>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                                                <div className="mt-1 relative rounded-md shadow-sm">
                                                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><Mail className="h-5 w-5 text-slate-400" /></div>
                                                    <input type="email" name="email" className="focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-md py-3 border" placeholder="example@email.com" value={formData.email} onChange={handleChange} />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* ÂïÜÊùêÊÉÖÂ†± */}
                                    <div className="p-6 sm:p-8 space-y-6 bg-slate-50">
                                        <h3 className="text-lg font-bold text-slate-900 flex items-center">
                                            <Zap className="w-5 h-5 mr-2 text-yellow-500" />
                                            Â•ëÁ¥Ñ„ÉªÂïÜÊùêÊÉÖÂ†±
                                        </h3>

                                        <div>
                                            <label className="block text-sm font-medium text-slate-700">Â•ëÁ¥ÑÈáëÈ°ç (Á®éËæº) <span className="text-red-500">*</span></label>
                                            <div className="mt-1 relative rounded-md shadow-sm max-w-xs">
                                                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><CreditCard className="h-5 w-5 text-slate-400" /></div>
                                                <input type="number" name="contractAmount" required className="focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-12 sm:text-sm border-slate-300 rounded-md py-3 border" placeholder="2000000" value={formData.contractAmount} onChange={handleChange} />
                                                <div className="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"><span className="text-slate-500 sm:text-sm">ÂÜÜ</span></div>
                                            </div>
                                        </div>

                                        <div>
                                            <span className="block text-sm font-medium text-slate-700 mb-2">ÂïÜÊùêÊÉÖÂ†±ÔºàË§áÊï∞ÈÅ∏ÊäûÂèØÔºâ <span className="text-red-500">*</span></span>
                                            <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
                                                {PRODUCT_OPTIONS.map((option) => (
                                                    <label key={option.id} className={`relative flex items-center p-3 rounded-lg border cursor-pointer transition-all ${formData.selectedProducts.includes(option.id) ? 'bg-blue-50 border-blue-500 ring-1 ring-blue-500' : 'bg-white border-slate-300 hover:bg-slate-50'}`}>
                                                        <input type="checkbox" name="products" value={option.id} checked={formData.selectedProducts.includes(option.id)} onChange={handleChange} className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded" />
                                                        <span className="ml-3 text-sm font-medium text-slate-900">{option.label}</span>
                                                    </label>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="space-y-4 border-t border-slate-200 pt-4 mt-4">
                                            {formData.selectedProducts.includes('solar') && (
                                                <div className="bg-white p-4 rounded-md border border-yellow-200 shadow-sm animate-fade-in-up">
                                                    <h4 className="font-bold text-yellow-700 mb-3 flex items-center"><Sun className="w-4 h-4 mr-1"/> „ÇΩ„Éº„É©„Éº„Éë„Éç„É´Ë©≥Á¥∞</h4>
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                                        <div>
                                                            <label className="block text-xs font-medium text-slate-500">„É°„Éº„Ç´„ÉºÂêç</label>
                                                            <input type="text" name="solarManufacturer" value={formData.solarManufacturer} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm border p-2" placeholder="‰æãÔºöQ„Çª„É´„Ç∫" />
                                                        </div>
                                                        <div>
                                                            <label className="block text-xs font-medium text-slate-500">„Ç∑„Çπ„ÉÜ„É†ÂÆπÈáè (kW)</label>
                                                            <input type="number" step="0.01" name="solarCapacity" value={formData.solarCapacity} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm border p-2" placeholder="‰æãÔºö5.5" />
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            {formData.selectedProducts.includes('battery') && (
                                                <div className="bg-white p-4 rounded-md border border-green-200 shadow-sm animate-fade-in-up">
                                                    <h4 className="font-bold text-green-700 mb-3 flex items-center"><BatteryCharging className="w-4 h-4 mr-1"/> ËìÑÈõªÊ±†Ë©≥Á¥∞</h4>
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                                        <div>
                                                            <label className="block text-xs font-medium text-slate-500">„É°„Éº„Ç´„ÉºÂêç</label>
                                                            <input type="text" name="batteryManufacturer" value={formData.batteryManufacturer} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm border p-2" placeholder="‰æãÔºö„Éã„ÉÅ„Ç≥„É≥" />
                                                        </div>
                                                        <div>
                                                            <label className="block text-xs font-medium text-slate-500">ËìÑÈõªÂÆπÈáè (kWh)</label>
                                                            <input type="number" step="0.01" name="batteryCapacity" value={formData.batteryCapacity} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm border p-2" placeholder="‰æãÔºö9.8" />
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            {formData.selectedProducts.includes('ecocute') && (
                                                <div className="bg-white p-4 rounded-md border border-blue-200 shadow-sm animate-fade-in-up">
                                                    <h4 className="font-bold text-blue-700 mb-3 flex items-center"><Home className="w-4 h-4 mr-1"/> „Ç®„Ç≥„Ç≠„É•„Éº„ÉàË©≥Á¥∞</h4>
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                                        <div>
                                                            <label className="block text-xs font-medium text-slate-500">„É°„Éº„Ç´„ÉºÂêç</label>
                                                            <input type="text" name="ecoCuteManufacturer" value={formData.ecoCuteManufacturer} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border p-2" placeholder="‰æãÔºö„ÉÄ„Ç§„Ç≠„É≥" />
                                                        </div>
                                                        <div>
                                                            <label className="block text-xs font-medium text-slate-500">„Çø„É≥„ÇØÂÆπÈáè (L)</label>
                                                            <input type="number" name="ecoCuteCapacity" value={formData.ecoCuteCapacity} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border p-2" placeholder="‰æãÔºö370" />
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            {formData.selectedProducts.includes('v2h') && (
                                                <div className="bg-white p-4 rounded-md border border-indigo-200 shadow-sm animate-fade-in-up">
                                                    <h4 className="font-bold text-indigo-700 mb-3 flex items-center"><Zap className="w-4 h-4 mr-1"/> V2HË©≥Á¥∞</h4>
                                                    <div>
                                                        <label className="block text-xs font-medium text-slate-500">„É°„Éº„Ç´„ÉºÂêç</label>
                                                        <input type="text" name="v2hManufacturer" value={formData.v2hManufacturer} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2" placeholder="‰æãÔºö„Éã„ÉÅ„Ç≥„É≥" />
                                                    </div>
                                                </div>
                                            )}

                                            {formData.selectedProducts.includes('ih') && (
                                                <div className="bg-white p-4 rounded-md border border-red-200 shadow-sm animate-fade-in-up">
                                                    <h4 className="font-bold text-red-700 mb-3 flex items-center"><Zap className="w-4 h-4 mr-1"/> IHË©≥Á¥∞</h4>
                                                    <div>
                                                        <label className="block text-xs font-medium text-slate-500">„É°„Éº„Ç´„ÉºÂêç</label>
                                                        <input type="text" name="ihManufacturer" value={formData.ihManufacturer} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm border p-2" placeholder="‰æãÔºö„Éë„Éä„ÇΩ„Éã„ÉÉ„ÇØ" />
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    {/* ÊãÖÂΩì„ÉªÊñΩÂ∑•ÊÉÖÂ†± */}
                                    <div className="p-6 sm:p-8 space-y-6">
                                        <h3 className="text-lg font-bold text-slate-900 flex items-center">
                                            <Briefcase className="w-5 h-5 mr-2 text-indigo-500" />
                                            ÊãÖÂΩì„ÉªÊñΩÂ∑•ÊÉÖÂ†±
                                        </h3>

                                        <div className="grid grid-cols-1 gap-6 sm:grid-cols-2">
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700">APÊãÖÂΩìËÄÖÂêç <span className="text-red-500">*</span></label>
                                                <input type="text" name="apStaffName" required value={formData.apStaffName} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border py-3 px-3" placeholder="„Ç¢„Éù„Ç§„É≥„Çø„ÉºÂêç" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700">CLÊãÖÂΩìËÄÖÂêç <span className="text-red-500">*</span></label>
                                                <input type="text" name="clStaffName" required value={formData.clStaffName} onChange={handleChange} className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border py-3 px-3" placeholder="„ÇØ„É≠„Éº„Ç∂„ÉºÂêç" />
                                            </div>
                                        </div>

                                        <div className="border-t border-slate-200 my-4"></div>

                                        <div className="grid grid-cols-1 gap-6 sm:grid-cols-2">
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700 flex items-center"><Wrench className="w-4 h-4 mr-1 text-slate-400" /> ÁèæË™øÊó• (Êó•ÊôÇ)</label>
                                                <input type="datetime-local" name="surveyDate" className="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border py-2 px-3" value={formData.surveyDate} onChange={handleChange} />
                                            </div>

                                            <div>
                                                <div className="flex justify-between items-center mb-1">
                                                    <label className="block text-sm font-medium text-slate-700 flex items-center"><Clock className="w-4 h-4 mr-1 text-slate-400" /> ÊñΩÂ∑•Êó• (Êó•ÊôÇ)</label>
                                                    <div className="flex items-center">
                                                        <input id="isConstructionUndecided" name="isConstructionUndecided" type="checkbox" className="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-slate-300 rounded" checked={formData.isConstructionUndecided} onChange={handleChange} />
                                                        <label htmlFor="isConstructionUndecided" className="ml-2 block text-xs text-slate-500 cursor-pointer">Êú™ÂÆö„ÅÆÂ†¥Âêà„ÅØ„ÉÅ„Çß„ÉÉ„ÇØ</label>
                                                    </div>
                                                </div>
                                                <input type="datetime-local" name="constructionDate" disabled={formData.isConstructionUndecided} className={`mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border py-2 px-3 ${formData.isConstructionUndecided ? 'bg-slate-100 text-slate-400 cursor-not-allowed' : ''}`} value={formData.constructionDate} onChange={handleChange} />
                                            </div>
                                        </div>

                                        <div>
                                            <label htmlFor="notes" className="block text-sm font-medium text-slate-700">ÂÇôËÄÉ„ÉªÁâπË®ò‰∫ãÈ†Ö</label>
                                            <div className="mt-1">
                                                <textarea id="notes" name="notes" rows={4} className="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-slate-300 rounded-md p-3" placeholder="„Åù„ÅÆ‰ªñÂÖ±Êúâ‰∫ãÈ†Ö„Åå„ÅÇ„Çå„Å∞„ÅîË®òÂÖ•„Åè„Å†„Åï„ÅÑ" value={formData.notes} onChange={handleChange} />
                                            </div>
                                        </div>
                                    </div>

                                    {/* „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏ */}
                                    {status === 'error' && (
                                        <div className="p-4 bg-red-50">
                                            <div className="flex">
                                                <div className="flex-shrink-0"><AlertCircle className="h-5 w-5 text-red-400" /></div>
                                                <div className="ml-3">
                                                    <h3 className="text-sm font-medium text-red-800">„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü</h3>
                                                    <div className="mt-2 text-sm text-red-700">{errorMessage}</div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {/* „Éï„ÉÉ„Çø„Éº */}
                                    <div className="px-6 py-8 bg-slate-50 sm:px-10 flex justify-end rounded-b-2xl">
                                        <button type="submit" disabled={status === 'loading'} className={`w-full sm:w-auto inline-flex justify-center items-center py-4 px-8 border border-transparent shadow-lg text-lg font-bold rounded-full text-white transition-all transform hover:-translate-y-0.5 ${status === 'loading' ? 'bg-slate-400 cursor-not-allowed shadow-none' : 'bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500'}`}>
                                            {status === 'loading' ? (
                                                <>
                                                    <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                                                    ÈÄÅ‰ø°‰∏≠...
                                                </>
                                            ) : (
                                                <>
                                                    <Send className="mr-2 h-5 w-5" />
                                                    Â•ëÁ¥Ñ„ÇíÁ¢∫ÂÆö„ÉªÂ†±Âëä„Åô„Çã
                                                </>
                                            )}
                                        </button>
                                    </div>

                                </form>
                            )}
                        </div>
                        
                        <div className="mt-8 text-center">
                            <p className="text-xs text-slate-400 font-medium">Âñ∂Ê•≠ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É† ¬© 2025 Solar Sales Co.</p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<ContractForm />);
    </script>
</body>
</html>
